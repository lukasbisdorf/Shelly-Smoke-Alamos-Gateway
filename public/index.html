<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShellySmoke2FE2 Konfiguration</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- New login form -->
    <div id="login-container" class="container" style="display: none;">
        <h1>Shelly 2 Alamos Gateway</h1>
        <h2>Login</h2>
        <form id="login-form">
            <div class="form-group">
                <label for="username">Benutzername:</label>
                <input type="text" id="username" required>
            </div>
            <div class="form-group">
                <label for="password">Passwort:</label>
                <input type="password" id="password" required>
            </div>
            <button type="submit">Anmelden</button>
        </form>
    </div>
    
    <!-- New header bar -->
    <div class="header">
        ShellySmoke2FE2 Konfiguration
        <button id="logout-button" style="float: right; background: var(--danger-color); color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer;">Abmelden</button>
    </div>
    
    <!-- New layout with sidebar and main content -->
    <div class="app-container">
        <div class="sidebar">
            <button type="button" id="btn-fe2" class="active">FE2 Konfiguration</button>
            <button type="button" id="btn-devices">Geräteverwaltung</button>
        </div>
        <div class="main-content">
            <!-- FE2 Panel -->
            <section id="fe2-panel" class="tab-panel">
                <section class="config-section info-section">
                    <h2>Konfigurationsanleitung</h2>
                    <div class="info-content">
                        <h3>Schritt 1: Alamos FE2 Alarmeingang einrichten:</h3>
                        <p>
                            <ul>
                                <li>Sie einen neuen Alarmeingang "Externe Schnittstelle in Alamos".</li>
                                <li>Vergeben Sie bei "Gülitge Absender" einen beliebigen Namen.</li>
                                <li>Wählen Sie in der Seitenleiste "HTTP" und aktivieren Sie den Eintrag "HTTP POST"</li>
                                <li>Speichern Sie den Alarmeingang und starten Sie ihn. </li>
                            </ul> 
                        </p>
                        <h3>Schritt 2: Das Gateway mit Alamos verbinden</h3>
                        <p>Tragen Sie nun im Untenstehenden Formular die Verbindungsparameter für Ihren Alamos Server ein.
                            <br> Das Gateway muss in der Lage sein, den Alamos Server via HTTP zu erreichen.
                        </p>
                        <p>In das Feld Autorisierung tragen Sie nun den zuvor festgelegten gültigen Absender ein.</p>
                        <p>Vergeben Sie nun noch eien Namen als Absender. z.B. Shelly Smoke Gateway</p>
                        
                        <h3>Schritt 3: Shelly Smoke Geräte hinzufügen</h3>
                        <p>Wechseln Sie hierfür links in der Navigation auf "Geräteverwaltung"</p>
                    </div>
                </section>

                <section class="config-section">
                    <h2>FE2 Konfiguration</h2>
                    <form id="fe2-config-form">
                        <div class="form-group">
                            <label for="fe2-url">FE2 URL:</label>
                            <input type="url" id="fe2-url" required>
                        </div>
                        <div class="form-group">
                            <label for="fe2-auth">Autorisierung:</label>
                            <input type="text" id="fe2-auth" required>
                        </div>
                        <div class="form-group">
                            <label for="fe2-sender">Absender:</label>
                            <input type="text" id="fe2-sender" required>
                        </div>
                        <button type="submit">FE2 Konfiguration speichern</button>
                    </form>
                </section>
            </section>

            <!-- Devices Panel -->
            <section id="devices-panel" class="tab-panel" style="display: none;">
                <section class="config-section info-section">
                    <h2>Konfigurationsanleitung</h2>
                    <div class="info-content">
                        <h3>Schritt 3: Shelly Smoke Geräte hinzufügen</h3>
                        <p>Für jedes Shelly Smoke Gerät:</p>
                        <ol>
                            <li>Fügen Sie das Gerät mit dem untenstehenden Formular hinzu</li>
                            <li>Klicken Sie auf die Schaltfläche "Webhooks", um die Webhook-URLs anzuzeigen</li>
                            <li>Konfigurieren Sie diese Webhooks in der Weboberfläche Ihres Shelly-Geräts:
                                <ul>
                                    <li><strong>Rauchalarm:</strong> Verwenden Sie die "Alarm Webhook" URL, wenn Rauch erkannt wird</li>
                                </ul>
                            </li>
                        </ol>
                    </div>
                </section>
                <section class="config-section">
                    <h2>Geräteverwaltung</h2>
                    <div class="master-detail">
                        <div>
                            <h3>Geräte</h3>
                            <div id="devices-list" class="devices-list">
                                <!-- Devices will be listed here -->
                            </div>
                        </div>
                        <div>
                            <h3>Geräteformular</h3>
                            <form id="device-form" class="form-grid">
                                <div class="form-group">
                                    <label for="device-id">Shelly ID:</label>
                                    <input type="text" id="device-id" required>
                                </div>
                                <div class="form-group">
                                    <label for="device-name">Name:</label>
                                    <input type="text" id="device-name" required>
                                </div>
                                <div class="form-group">
                                    <label for="device-unit">FE2 Einheitenkennung (Rauch):</label>
                                    <input type="text" id="device-unit" required>
                                </div>
                                <div class="form-group">
                                    <label for="device-street">Straße:</label>
                                    <input type="text" id="device-street" required>
                                </div>
                                <div class="form-group">
                                    <label for="device-house">Hausnummer:</label>
                                    <input type="text" id="device-house" required>
                                </div>
                                <div class="form-group">
                                    <label for="device-city">Stadt:</label>
                                    <input type="text" id="device-city" required>
                                </div>
                                <div class="form-group coordinates">
                                    <label>Koordinaten:</label>
                                    <div class="coord-inputs">
                                        <div class="input-with-help">
                                            <input type="text" 
                                                   id="device-lat" 
                                                   pattern="-?\d+\.?\d*"
                                                   placeholder="Breitengrad" 
                                                   required 
                                                   title="Geben Sie eine gültige Dezimalzahl ein (z.B. 52.520008)">
                                            <small class="help-text">z.B. 52.520008 (Punkt als Dezimaltrennzeichen verwenden)</small>
                                        </div>
                                        <div class="input-with-help">
                                            <input type="text" 
                                                   id="device-lon" 
                                                   pattern="-?\d+\.?\d*"
                                                   placeholder="Längengrad" 
                                                   required
                                                   title="Geben Sie eine gültige Dezimalzahl ein (z.B. 13.404954)">
                                            <small class="help-text">z.B. 13.404954 (Punkt als Dezimaltrennzeichen verwenden)</small>
                                        </div>
                                    </div>
                                    <small class="help-text coordinates-hint">
                                        Tipp: Finden Sie Koordinaten auf Google Maps, indem Sie mit der rechten Maustaste auf einen Ort klicken und "Was ist hier?" auswählen
                                    </small>
                                </div>
                                <button type="submit">Gerät hinzufügen</button>
                            </form>
                        </div>
                    </div>
                </section>
            </section>
        </div>
    </div>
    <script src="app.js"></script>
</body>
</html>
